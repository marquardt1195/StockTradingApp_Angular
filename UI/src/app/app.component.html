<app-nav-menu></app-nav-menu>
<router-outlet></router-outlet>

<!--<div class="container mt-5">
  <app-add-transaction
    *ngIf="showForm"
    [showForm]="showForm"
    [formMode]="formMode"
    [selectedTransaction]="selectedTransaction"
    (closeForm)="showForm = false">
  </app-add-transaction>
</div>-->

<app-add-trade *ngIf="showForm"
               [showForm]="showForm"
               [formMode]="formMode"
               [selectedTransaction]="selectedTransaction"
               (closeForm)="showForm = false">
</app-add-trade>

<!--<div>FOR TESTING</div>
<div class="container">
  <div class="row card" >
    <div class="col-lg-12">
      <div class="mb-1 mt-3">
        <button (click)="showForm = true; formMode = 'addNewTransaction'" class="btn btn-success">Add New Transaction</button>
      </div>
      <div class="row">
        <div *ngIf="transactions$ | async as transactions" class="card-body">
          <table class="table table-hover table-bordered">
            <thead>
              <tr class="table-primary">
                <th>Symbol</th>
                <th>$ Entry Price</th>
                <th># Shares Bought</th>
                <th>Entry Date</th>
                <th>$ Stop Loss</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngFor="let item of transactions">
                <tr>
                  <td>{{item.stock_symbol}}</td>
                  <td>{{item.entry_price | currency: 'USD':'symbol':'1.2-2'}}</td>
                  <td>{{item.shares_bought}}</td>
                  <td>{{item.entry_date | date: 'MM/dd/yyyy'}}</td>
                  <td>{{item.dollar_stop_loss | currency: 'USD':'symbol':'1.2-2'}}</td>-->
 <!--'symbol' uses $. 1.2-2 means at least 1 digit before the decimal point, at least 2 digits after the decimal point, and at most 2 digits after the decimal point.-->
<!--<td style="width: 17%; text-align: center;">
                    <button class="btn btn-sm btn-secondary mx-1">
                      <i class="oi oi-magnifying-glass"></i>
                    </button>
                    <button class="btn btn-sm btn-success" (click)="openAddLegForm(item)">
                      <i class="oi oi-plus"></i>
                    </button>
                    <button class="btn btn-sm btn-danger mx-1">
                      <i class="oi oi-minus"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-danger">
                      <i class="oi oi-trash"></i>
                    </button>
                  </td>
                </tr>
              </ng-container>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </div>
</div>



<br /> <br />-->




<div class="container">
  <div class="row card">
    <div class="col-lg-12">
      <div class="mb-1 mt-3">
        <button (click)="showForm = true; formMode = 'addNewTrade'" class="btn btn-success">Add New Trade</button>
      </div>
      <div class="row">
        <!-- Use *ngIf with else to handle loading state -->
        <div *ngIf="transactions$ | async as transactions; else loading" class="card-body">
          <table class="table table-hover table-bordered">
            <thead>
              <tr class="table-primary">
                <th>Symbol</th>
                <th>$ Entry Price</th>
                <th># Shares Bought</th>
                <th>Entry Date</th>
                <th>$ Stop Loss</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngFor="let item of transactions">
                <tr>
                  <td>{{item.stock_symbol}}</td>
                  <td>{{item.entry_price | currency: 'USD':'symbol':'1.2-2'}}</td>
                  <td>{{item.shares_bought}}</td>
                  <td>{{item.entry_date | date: 'MM/dd/yyyy'}}</td>
                  <td>{{item.dollar_stop_loss | currency: 'USD':'symbol':'1.2-2'}}</td> <!--'symbol' uses $. 1.2-2 means at least 1 digit before the decimal point, at least 2 digits after the decimal point, and at most 2 digits after the decimal point.-->
                  <td style="width: 17%; text-align: center;">
                    <button class="btn btn-sm btn-secondary mx-1">
                      <i class="oi oi-magnifying-glass"></i>
                    </button>
                    <button class="btn btn-sm btn-success" (click)="openAddLegForm(item)">
                      <i class="oi oi-plus"></i>
                    </button>
                    <button class="btn btn-sm btn-danger mx-1">
                      <i class="oi oi-minus"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-danger">
                      <i class="oi oi-trash"></i>
                    </button>
                  </td>
                </tr>
              </ng-container>
            </tbody>
          </table>
        </div>
        <ng-template #loading>
          <div class="d-flex justify-content-center mt-3 mb-3">
            <div class="spinner-border text-primary" role="status">
              <span class="sr-only"></span>
            </div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>



<!--<div *ngIf="singleTransaction$ | async as transaction">
  <div>{{ transaction.stock_symbol }}</div>
</div>-->
